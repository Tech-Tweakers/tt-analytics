"use strict";(self.webpackChunkgitpages=self.webpackChunkgitpages||[]).push([[54],{3312:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>p,frontMatter:()=>n,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"polaris-api-python/rework-rate","title":"Polaris Python API","description":"Carregando gr\xe1ficos...}>","source":"@site/docs/polaris-api-python/rework-rate.mdx","sourceDirName":"polaris-api-python","slug":"/polaris-api-python/rework-rate","permalink":"/tt-analytics/polaris-api-python/rework-rate","draft":false,"unlisted":false,"editUrl":"https://github.com/tech-tweakers/tt-analytics/edit/main/docs/polaris-api-python/rework-rate.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Polaris Python API","hide_title":true,"sidebar_label":"\ud83d\udc0d Polaris Python API","sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"\ud83d\udcca Rework Dashboard","permalink":"/tt-analytics/"},"next":{"title":"Code Churn","permalink":"/tt-analytics/polaris-api-python/code-churn"}}');var o=r(4848),s=r(8453),l=r(5363);const n={title:"Polaris Python API",hide_title:!0,sidebar_label:"\ud83d\udc0d Polaris Python API",sidebar_position:2},i=void 0,c={},d=[];function h(e){const t={div:"div",...(0,s.R)(),...e.components};return(0,o.jsx)(l.A,{fallback:(0,o.jsx)(t.div,{children:"Carregando gr\xe1ficos..."}),children:()=>{const e=r(3365).A;return(0,o.jsx)(e,{repo:"polaris-python-api"})}})}function p(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(h,{...e})}):h(e)}},3365:(e,t,r)=>{r.d(t,{A:()=>h});var a=r(6540),o=r(1236),s=r(1075),l=(r(7347),r(4809)),n=r.n(l),i=r(5363),c=r(4848);const d=21;function h(e){let{repo:t}=e;return(0,c.jsx)(i.A,{fallback:(0,c.jsx)("div",{children:"Carregando gr\xe1ficos..."}),children:()=>(0,c.jsx)(p,{repo:t})})}function p(e){let{repo:t}=e;const r=t,[l,i]=(0,a.useState)([]),[h,p]=(0,a.useState)([]),[u,x]=(0,a.useState)(new Date((new Date).setDate((new Date).getDate()-d))),[m,b]=(0,a.useState)(new Date),[g,y]=(0,a.useState)(!1);(0,a.useEffect)((()=>{fetch(`tt-analytics/data/repos/rework_analysis_${r}.json`).then((e=>e.json())).then((e=>{const t=e.data.sort(((e,t)=>new Date(e.data).getTime()-new Date(t.data).getTime()));i(t),p(t)}))}),[]),(0,a.useEffect)((()=>{if(0===l.length)return;const e=l.filter((e=>{const t=new Date(e.data);return t>=u&&t<=m}));p(e),y(!0)}),[u,m,l]);const j=h.map((e=>e.data)),k=(h.map((e=>e.rework_rate_total)),h.map((e=>e.rework_rate_recent))),w=l.map((e=>e.data)),f=l.map((e=>e.rework_rate_total)),_={};h.forEach((e=>{const t=e.autor||"Desconhecido";_[t]=(_[t]||0)+e.rework_changes_total}));Object.entries(_).map((e=>{let[t,r]=e;return{autor:t,total:r}})).sort(((e,t)=>Number(t.total)-Number(e.total))).slice(0,10);const A={};h.forEach((e=>{const t=e.autor||"Desconhecido";A[t]=(A[t]||0)+e.rework_changes_total}));Object.entries(A).map((e=>{let[t,r]=e;return{autor:t,total:r}})).sort(((e,t)=>Number(t.total)-Number(e.total))).slice(0,10);const R={};h.forEach((e=>{const t=e.autor||"Desconhecido";R[t]=(R[t]||0)+e.rework_changes_recent}));const D=Object.entries(R).map((e=>{let[t,r]=e;return{autor:t,total:r}})).sort(((e,t)=>Number(t.total)-Number(e.total))).slice(0,10);return(0,c.jsxs)("div",{children:[(0,c.jsx)("br",{}),(0,c.jsx)("h3",{children:"\xdaltimos 21 dias"}),(0,c.jsxs)("div",{style:{display:"flex",gap:"20px",alignItems:"center",marginBottom:20},children:[(0,c.jsx)("label",{children:(0,c.jsx)("strong",{children:"In\xedcio:"})}),(0,c.jsx)(s.Ay,{selected:u,onChange:x}),(0,c.jsx)("label",{children:(0,c.jsx)("strong",{children:"Fim:"})}),(0,c.jsx)(s.Ay,{selected:m,onChange:b}),g&&(0,c.jsx)("button",{onClick:()=>{const e=n().unparse(h),t=new Blob([e],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(t),o=document.createElement("a");o.href=a,o.setAttribute("download",`rework_data_${r}.csv`),document.body.appendChild(o),o.click(),document.body.removeChild(o)},style:{marginLeft:"center",padding:"2px 16px"},children:"\ud83d\udce5 Exportar CSV"})]}),(0,c.jsx)(o.A,{data:[{x:j,y:k,type:"bar",name:"Rework Rate (21 dias)",marker:{color:"orange"}}],layout:{width:1e3,height:400,paper_bgcolor:"#1c1e26",plot_bgcolor:"#1c1e26",font:{color:"#eee"},title:`\ud83d\udcc8 Rework Rate - \xdaltimos ${d} dias`,xaxis:{title:"Data"},yaxis:{title:"Rework Rate (%)"}}}),(0,c.jsx)("h3",{children:"\ud83c\udfc6 Top Autores:"}),(0,c.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",marginBottom:40},children:[(0,c.jsx)("thead",{style:{background:"#2a2a2a"},children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{style:{textAlign:"center",padding:8,color:"#eee"},children:"Autor"}),(0,c.jsx)("th",{style:{textAlign:"center",padding:8,color:"#eee"},children:"Linhas de Retrabalho"})]})}),(0,c.jsx)("tbody",{children:D.map(((e,t)=>{let{autor:r,total:a}=e;return(0,c.jsxs)("tr",{style:{borderBottom:"1px solid #444"},children:[(0,c.jsx)("td",{style:{padding:8,color:"#ccc"},children:r}),(0,c.jsx)("td",{style:{padding:8,color:"#ccc"},children:Number(a)})]},t)}))})]}),(0,c.jsx)("br",{}),(0,c.jsx)("h3",{children:"Per\xedodo Completo do Reposit\xf3rio"}),(0,c.jsx)(o.A,{data:[{x:w,y:f,type:"bar",mode:"lines+markers",name:"Rework Rate Total",marker:{color:"light-blue"}}],layout:{width:1e3,height:400,paper_bgcolor:"#1c1e26",plot_bgcolor:"#1c1e26",font:{color:"#eee"},title:"\ud83d\udcc8 Rework Rate Geral",xaxis:{title:"Data"},yaxis:{title:"Rework Rate (%)"}}}),(0,c.jsx)("h3",{children:"\ud83c\udfc5 Top Autores:"}),(0,c.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",marginBottom:40},children:[(0,c.jsx)("thead",{style:{background:"#2a2a2a"},children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{style:{textAlign:"left",padding:8},children:"Autor"}),(0,c.jsx)("th",{style:{textAlign:"left",padding:8},children:"Total de Linhas de Retrabalho"})]})}),(0,c.jsx)("tbody",{children:Object.entries(l.reduce(((e,t)=>{const r=t.autor||"Desconhecido";return e[r]=(e[r]||0)+t.rework_changes_total,e}),{})).map((e=>{let[t,r]=e;return{autor:t,total:r}})).sort(((e,t)=>Number(t.total)-Number(e.total))).slice(0,10).map(((e,t)=>{let{autor:r,total:a}=e;return(0,c.jsxs)("tr",{style:{borderBottom:"1px solid #ddd"},children:[(0,c.jsx)("td",{style:{padding:8},children:r}),(0,c.jsx)("td",{style:{padding:8},children:Number(a)})]},t)}))})]})]})}}}]);